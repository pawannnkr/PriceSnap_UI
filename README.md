# Amazon Price Tracker - Chrome Extension

A Chrome extension built with React for tracking Amazon product prices. Integrates with a backend API to store price history, track price changes, and send notifications.

## Features

- ✅ **Track Multiple Products**: Add Amazon products to monitor with custom price thresholds
- ✅ **Price Alerts**: Get notified via email/SMS when prices reach your target threshold
- ✅ **Price History & Visualization**: View interactive price trend charts with min/max/avg statistics
- ✅ **Notification Settings**: Configure email and phone number for alerts
- ✅ **Real-time Updates**: Automatic price checking with Chrome Alarms
- ✅ **Clean UI**: Intuitive React-based popup interface with product management

## Project Structure

```
Price_tracker_UI/
├── manifest.json                # Chrome Extension Manifest v3
├── index.html                   # Popup entry HTML
├── package.json                 # Dependencies & scripts
├── vite.config.js               # Vite build configuration
├── .gitignore                   # Git ignore rules
├── README.md                    # This file
├── src/
│   ├── index.jsx                # React popup entry point
│   ├── index.css                # Global styles
│   ├── config.js                # API endpoints configuration
│   ├── background.js            # Service worker (alarms, notifications)
│   ├── contentScript.js         # Content script for Amazon product pages
│   ├── api/
│   │   └── client.js            # Axios API client for backend communication
│   └── components/
│       ├── Popup.jsx            # Main popup component (product list, add product)
│       ├── Popup.css            # Popup styles
│       ├── ProductCard.jsx      # Product card display & interactions
│       ├── ProductCard.css      # Product card styles
│       ├── PriceHistory.jsx     # Price history chart & table
│       ├── PriceHistory.css     # Price history styles
│       ├── NotificationSettings.jsx  # Email/phone notification settings
│       └── NotificationSettings.css  # Notification settings styles
└── dist/                        # Built extension (generated by npm run build)
```

## Installation & Setup

### Prerequisites
- Node.js 16+ and npm
- Chrome browser (or Chromium-based)
- Backend API server running (see Backend Setup section)

### 1. Install Dependencies
```bash
cd Price_tracker_UI
npm install
```

### 2. Configure Backend API

Edit [src/config.js](src/config.js) and set your backend API URL:

```javascript
export const API_BASE_URL = 'https://your-backend.com/api';
```

### 3. Build the Extension
```bash
npm run build
```

This generates optimized files in the `dist/` folder.

### 4. Load Extension in Chrome

1. Open Chrome and go to `chrome://extensions/`
2. Enable **Developer mode** (toggle in top-right corner)
3. Click **Load unpacked**
4. Select the `dist/` folder from your project
5. The extension should now appear in your Chrome extensions list and toolbar

## Backend API Integration

The extension communicates with a backend API. Configure your API endpoint in [src/config.js](src/config.js).

### Expected Backend Endpoints

All endpoints use the base URL configured in `config.js`.

| Method | Endpoint | Body/Params | Purpose |
|--------|----------|-------------|---------|
| POST | `/products` | `{ url, threshold }` | Add a product to track |
| GET | `/products` | — | Get all tracked products |
| DELETE | `/products` | `{ url }` (body) | Remove a product |
| GET | `/history/by-url` | `?url=<url>&limit=10` | Get price history for product |
| GET | `/history/stats/by-url` | `?url=<url>` | Get price statistics (min, max, avg) |
| PUT | `/notifications` | `{ email, phone_number }` | Update notification settings |

### Example API Response Shapes

**Add Product Response:**
```json
{
  "success": true,
  "data": {
    "url": "https://amazon.in/dp/...",
    "threshold": 1500,
    "current_price": 1999,
    "title": "Product Name"
  }
}
```

**Price History Response:**
```json
{
  "entries": [
    { "price": 1999, "timestamp": "2026-01-29T10:30:00.123456Z" },
    { "price": 1899, "timestamp": "2026-01-29T11:45:00.654321Z" }
  ]
}
```

**Price Statistics Response:**
```json
{
  "statistics": {
    "average_price": 1950,
    "current_price": 1899,
    "highest_price": 2199,
    "lowest_price": 1799,
    "price_change": -100,
    "price_change_percent": -5.0,
    "threshold": 1500,
    "title": "Product Name",
    "total_entries": 25,
    "url": "https://amazon.in/dp/..."
  }
}
```

## Usage

### Adding a Product
1. Navigate to any Amazon product page
2. Click the extension icon in the Chrome toolbar
3. Click "Add Current Product"
4. Set your desired price threshold (alert when price drops to this amount)
5. Click "Submit" to start tracking

### Viewing Price History
1. In the popup, click "View History" on any product card
2. A chart will display price trends over time
3. See Min, Max, Avg prices and percentage change
4. Adjust the limit dropdown to view last 5, 10, 15, or 20 entries
5. Hover over data points on the chart for detailed information

### Setting Notifications
1. In the popup, click "Notification Settings"
2. Enter your email address and/or phone number
3. Click "Update" to save
4. You'll receive alerts when tracked prices hit your threshold

### Removing Products
1. In the popup, click "Remove" on the product card
2. The product will be removed from tracking immediately

## Development

### Development Build
```bash
npm run dev
```

Starts Vite's dev server. After making changes, rebuild:
```bash
npm run build
```

Then reload the extension in Chrome (`chrome://extensions/` → click refresh icon).

### Development Workflow

1. Make changes to any `.jsx`, `.js`, or `.css` file
2. Run `npm run build` to rebuild
3. Go to `chrome://extensions/`
4. Click the refresh icon on the extension card
5. Changes are now live in the extension

### Debugging

- **Popup Errors**: Right-click extension → "Inspect popup" to see console logs
- **Content Script**: Open DevTools on Amazon page → look for content script messages
- **Background Worker**: Go to `chrome://extensions/` → click "service worker" to inspect
- **API Calls**: Check browser console in popup for axios request logs

## Component Documentation

### Popup.jsx
Main popup component that displays all tracked products. Handles adding new products, removing products, and displays product cards. Integrates NotificationSettings.

**Key Methods:**
- `getProducts()` - Fetch all tracked products from backend
- `submitProduct()` - Add a new product with threshold
- `handleRemoveProduct()` - Remove product by URL
- `handleThresholdUpdate()` - Update product threshold

### ProductCard.jsx
Displays individual product information including image, title, current price, threshold, and action buttons.

**Features:**
- Shows product image and title
- Displays current price and alert threshold in ₹
- "View History" button to toggle price history view
- "Remove" button to delete product
- Color-coded price comparisons

### PriceHistory.jsx
Displays price history visualization with an interactive SVG line chart and detailed statistics table.

**Features:**
- Fetches price history and statistics from backend
- Renders SVG line chart with data points
- Shows Min, Max, Avg prices and percentage change
- Table view of all price entries with timestamps
- Adjustable limit (5, 10, 15, 20 entries)
- Handles microsecond timestamps and normalizes API responses

### NotificationSettings.jsx
Allows users to configure email and phone number for price alerts.

**Features:**
- Input fields for email and phone number
- Validates email format
- Saves settings to backend via PUT request
- localStorage fallback for UI state

### background.js (Service Worker)
Handles Chrome Alarms and background tasks for the extension.

**Features:**
- Sets up periodic price check alarms
- Listens for alarm triggers
- Sends notifications when prices hit thresholds
- Handles Chrome runtime messages

### contentScript.js
Extracts product information from Amazon product pages.

**Extracted Data:**
- Product title
- Current price
- Product image
- ASIN (Amazon Standard ID)

## API Client Methods

The extension uses axios for API communication. See [src/api/client.js](src/api/client.js) for all available methods.

**Core Methods:**
```javascript
// Product Management
apiClient.addProduct({ url, threshold })       // Add product
apiClient.getProducts()                         // Get all products
apiClient.deleteProductByUrl(productUrl)       // Remove product
apiClient.checkSpecificProduct(productUrl)     // Check specific product

// Price History
apiClient.getPriceHistory(productUrl, limit)   // Get price history
apiClient.getPriceStats(productUrl)            // Get stats (min/max/avg)
apiClient.getHistoryAllProducts()              // Get history for all products

// Notifications
apiClient.updateNotifications(email, phoneNumber)  // Update notification settings
apiClient.checkAndAlert(productUrl, threshold)    // Check and trigger alert
```

## Troubleshooting

### Extension Not Loading?
- Ensure all files are present in `dist/` folder
- Check `manifest.json` is valid JSON
- Open `chrome://extensions/` → "Inspect popup" to see errors
- Clear cache and reload extension

### API Connection Issues?
- Verify backend API is running and accessible
- Check configured API URL in [src/config.js](src/config.js)
- Open Chrome DevTools console to see network errors
- Ensure CORS is properly configured on backend

### Products Not Appearing?
- Verify backend `/api/products` endpoint is accessible
- Check network tab in DevTools for API response
- Ensure backend is storing products correctly
- Try removing and re-adding a product

### Price History Not Showing?
- Verify `getPriceHistory` endpoint returns correct format
- Check DevTools console for timestamp parsing errors
- Ensure price history data exists for the product
- Verify API response includes `entries` or `history` array

### Content Script Not Extracting Product Info?
- Verify you're on an official Amazon product page (amazon.com, amazon.in, etc.)
- Check that URL contains `/dp/` path (product detail pages)
- Ensure page fully loads before clicking extension
- Check console for JavaScript errors on Amazon page

## File Ignore Rules

The `.gitignore` file excludes the following from version control:
```
node_modules/          # npm dependencies
dist/                  # Built extension output
.env.example           # Environment variable example
.DS_Store              # macOS system files
.vscode/               # VS Code settings
*.log                  # Log files
```

Make sure not to commit these files when pushing to git.

## License

MIT
